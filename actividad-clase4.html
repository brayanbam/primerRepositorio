<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Actividad Clase 4</title>
<style>
body {
  font-family: Arial, sans-serif;
  background-color: #f4f6f8;
  margin: 0;
  padding: 0;
}

.container {
  max-width: 900px;
  margin: auto;
  background: white;
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(10, 9, 9, 0.1);
}

h1, h2 {
  color: #2c3e50;
}

h1 {
  text-align: center;
}

.section {
  margin-top: 30px;
}

label {
  font-weight: bold;
}

.line {
  border-bottom: 1px solid #ccc;
  margin: 8px 0 16px 0;
  padding-bottom: 4px;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

th, td {
  border: 1px solid #ccc;
  padding: 8px;
  text-align: center;
}

th {
  background-color: #e9eef3;
}

.note {
  background: #eef7ff;
  padding: 15px;
  border-left: 4px solid #3498db;
  margin-top: 20px;
}

.footer {
  margin-top: 30px;
  padding: 15px;
  background: #f1f1f1;
  border-radius: 8px;
}
</style>
</head>
<body>

<div class="container">

<h1>ğŸŒ Actividad Clase 4</h1>
<h2>ComunicaciÃ³n entre Servicios + REST + Eventos + Service Discovery</h2>

<p><strong>Equipo:</strong> Brayan Bambague Gallardo &nbsp;|&nbsp; Marvin Ronaldo Meneses &nbsp;|&nbsp; Yordi &nbsp;|&nbsp; Jhonathan</p>
<p><strong>Proyecto:</strong> Gestor De Tareas</p>

<div class="section">
<h2>ğŸªœ 1. Interacciones entre Servicios</h2>

<p><strong>InteracciÃ³n 1</strong></p>
<label>Servicio que envÃ­a:</label>
<div class="line">Servicio de Usuarios (AutenticaciÃ³n)</div>
<label>Servicio que recibe:</label>
<div class="line">Servicio de Tareas</div>
<label>InformaciÃ³n enviada:</label>
<div class="line"> tarea asignada</div>
<label>Â¿QuÃ© sucede si no responde?</label>
<div class="line">El Servicio de Tareas rechaza la solicitud con error 401 (no autorizado) y no permite la operaciÃ³n</div>

<p><strong>InteracciÃ³n 2</strong></p>
<label>Servicio que envÃ­a:</label>
<div class="line">Servicio de Tareas</div>
<label>Servicio que recibe:</label>
<div class="line">Servicio de Notificaciones</div>
<label>InformaciÃ³n enviada:</label>
<div class="line">Evento "tarea_asignada" fecha lÃ­mite</div>
<label>Â¿QuÃ© sucede si no responde?</label>
<div class="line">La tarea se guarda igual; la notificaciÃ³n se reintenta luego (no bloquea el flujo principal)</div>

<p><strong>InteracciÃ³n 3</strong></p>
<label>Servicio que envÃ­a:</label>
<div class="line">Servicio de Tareas</div>
<label>Servicio que recibe:</label>
<div class="line">Servicio de Reportes / Dashboard</div>
<label>InformaciÃ³n enviada:</label>
<div class="line">Evento "tarea_completada" </div>
<label>Â¿QuÃ© sucede si no responde?</label>
<div class="line">Los reportes quedan desactualizados temporalmente; el sistema de tareas sigue operando con normalidad</div>
</div>

<div class="section">
<h2>ğŸªœ 2. REST o Eventos</h2>

<table>
<tr>
<th>InteracciÃ³n</th>
<th>REST</th>
<th>Evento</th>
<th>Â¿Por quÃ©?</th>
</tr>
<tr>
<td>1 Â· Usuarios Tareas</td>
<td>âœ“</td>
<td></td>
<td>Se necesita respuesta inmediata para saber si el usuario tiene permiso antes de continuar con la operaciÃ³n.</td>
</tr>
<tr>
<td>2 Â· Tareas  Notificaciones</td>
<td></td>
<td>âœ“</td>
<td>La notificaciÃ³n no es crÃ­tica para guardar la tarea. Con un evento se desacopla el servicio y un fallo en notificaciones no afecta el guardado.</td>
</tr>
<tr>
<td>3 Â· Tareas  Reportes</td>
<td></td>
<td>âœ“</td>
<td>Los reportes se actualizan en segundo plano. No es necesario esperar confirmaciÃ³n del servicio de reportes para considerar la tarea completada.</td>
</tr>
</table>
</div>

<div class="section">
<h2>ğŸªœ 3. SÃ­ncrono o AsÃ­ncrono</h2>

<table>
<tr>
<th>InteracciÃ³n</th>
<th>SÃ­ncrono</th>
<th>AsÃ­ncrono</th>
<th>JustificaciÃ³n</th>
</tr>
<tr>
<td>1 Â· ValidaciÃ³n de usuario</td>
<td>âœ“</td>
<td></td>
<td>El servicio de tareas debe esperar la respuesta del servicio de autenticaciÃ³n para saber si puede procesar o rechazar la solicitud.</td>
</tr>
<tr>
<td>2 Â· NotificaciÃ³n de tarea asignada</td>
<td></td>
<td>âœ“</td>
<td>El usuario recibe confirmaciÃ³n de asignaciÃ³n de inmediato. El envÃ­o de la notificaciÃ³n ocurre en segundo plano sin bloquear al cliente.</td>
</tr>
<tr>
<td>3 Â· ActualizaciÃ³n de reportes</td>
<td></td>
<td>âœ“</td>
<td>Los dashboards se actualizan eventualmente. No es necesario esperar; el usuario ya recibiÃ³ confirmaciÃ³n de que la tarea fue completada.</td>
</tr>
</table>
</div>

<div class="section">
<h2>ğŸªœ 4. Eventos Importantes del Sistema</h2>
1ï¸âƒ£ <strong>tarea_creada</strong> â€” Se emite cuando un usuario crea una nueva tarea. Contiene: ID de tarea, tÃ­tulo, proyecto, usuario creador y fecha lÃ­mite. Lo consumen: Notificaciones y Reportes.<br><br>
2ï¸âƒ£ <strong>tarea_asignada</strong> â€” Se emite cuando una tarea es asignada a un usuario. Contiene: ID de tarea, ID del usuario asignado y prioridad. Lo consume: Notificaciones (para avisar al usuario asignado).<br><br>
3ï¸âƒ£ <strong>tarea_completada</strong> â€” Se emite cuando un usuario marca una tarea como completada. Contiene: ID de tarea, ID de usuario, timestamp y proyecto. Lo consumen: Reportes/Dashboard y Notificaciones.
</div>

<div class="section">
<h2>ğŸªœ 5. AnÃ¡lisis de Fallos</h2>
<label>Servicio mÃ¡s crÃ­tico:</label>
<div class="line">Servicio de Usuarios / AutenticaciÃ³n</div>
<label>Â¿QuÃ© pasarÃ­a si falla?</label>
<div class="line">NingÃºn usuario podrÃ­a autenticarse. El Servicio de Tareas rechazarÃ­a todas las operaciones (crear, editar, completar), bloqueando completamente la aplicaciÃ³n.</div>
<label>Â¿El sistema debe detenerse o continuar?</label>
<div class="line">Continuar parcialmente: operaciones de lectura con sesiÃ³n en cachÃ© pueden mantenerse. Las operaciones que requieran nueva autenticaciÃ³n deben detenerse por seguridad.</div>
<label>Â¿CÃ³mo podrÃ­an manejar este fallo?</label>
<div class="line">Implementar Circuit Breaker para detectar fallos. Usar cachÃ© de tokens JWT vÃ¡lidos para peticiones recientes. Tener instancias redundantes (rÃ©plicas) del servicio de autenticaciÃ³n con balanceo de carga.</div>
</div>

<div class="section">
<h2>ğŸªœ 6. Service Discovery</h2>
<label>Â¿QuÃ© problema ocurre si cambia la IP de un servicio?</label>
<div class="line">Todos los servicios que apuntan a esa IP fija dejarÃ­an de comunicarse. Por ejemplo, si el Servicio de Tareas tiene hardcodeada la IP del Servicio de Notificaciones y esta cambia, las notificaciones dejan de enviarse aunque el servicio estÃ© funcionando.</div>
<label>Â¿CÃ³mo sabrÃ­a un servicio dÃ³nde encontrar otro?</label>
<div class="line">Con un Service Discovery (como Consul o Eureka), cada servicio se registra automÃ¡ticamente al iniciarse con su nombre y direcciÃ³n actual. Cuando Tareas necesita contactar a Notificaciones, consulta el registro para obtener la direcciÃ³n actualizada.</div>
<label>Â¿Por quÃ© serÃ­a Ãºtil Service Discovery?</label>
<div class="line">Permite que los servicios escalen horizontalmente, se reinicien o cambien de IP sin romper la comunicaciÃ³n. El sistema es mÃ¡s resiliente y no requiere configuraciÃ³n manual de direcciones.</div>
<label>Â¿DÃ³nde lo aplicarÃ­an en su sistema?</label>
<div class="line">Entre todos los servicios: API Gateway â†’ Usuarios, API Gateway â†’ Tareas, y Tareas â†’ Notificaciones. Especialmente Ãºtil en despliegue con contenedores (Docker/Kubernetes) donde las IPs cambian constantemente.</div>
</div>

<div class="section">
<h2>ğŸªœ 7. Mini Diagrama</h2>
<p>Dibujen:</p>
<p><strong>Servicio A â†’ Service Discovery â†’ Servicio B</strong></p>
<br>
<p style="text-align:center; font-family: monospace; font-size: 1rem; background:#f4f6f8; padding:20px; border-radius:8px;">
  Servicio de Tareas
  &nbsp;&nbsp;â†’&nbsp;&nbsp;
  ğŸ” Service Discovery (Consul/Eureka)
  &nbsp;&nbsp;â†’&nbsp;&nbsp;
  Servicio de Notificaciones
  <br><br>
  <small style="color:#666;">
    [1] Notificaciones se registra en Discovery al iniciar con su IP actual.<br>
    [2] Tareas consulta al Discovery: "Â¿dÃ³nde estÃ¡ Notificaciones?"<br>
    [3] Discovery responde con la IP/puerto actual.<br>
    [4] Tareas se comunica directamente con Notificaciones usando esa direcciÃ³n.
  </small>
</p>
</div>

<div class="note">
ğŸ’¡ <strong>Ayuda rÃ¡pida</strong><br>
REST â†’ peticiÃ³n directa<br>
Evento â†’ algo ocurriÃ³<br>
SÃ­ncrono â†’ espera respuesta<br>
AsÃ­ncrono â†’ continÃºa sin esperar<br>
Service Discovery â†’ permite encontrar servicios automÃ¡ticamente
</div>

<div class="footer">
ğŸ¤ El equipo debe poder explicar:<br>
âœ” una interacciÃ³n importante: Usuarios â†’ Tareas (REST sÃ­ncrono para validar token JWT)<br>
âœ” un evento del sistema: tarea_completada â†’ consume Reportes y Notificaciones de forma asÃ­ncrona<br>
âœ” quÃ© pasa si un servicio falla: Auth falla â†’ Circuit Breaker + cachÃ© de tokens + rÃ©plicas<br>
âœ” dÃ³nde usarÃ­an Service Discovery: entre todos los microservicios, especialmente en contenedores
</div>

</div>
</body>
</html>
